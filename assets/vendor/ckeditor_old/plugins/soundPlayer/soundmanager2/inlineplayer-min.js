function InlinePlayer(){var b=this,c=this,f=soundManager,g=navigator.userAgent.match(/msie/i);this.playableClass="inline-playable";this.excludeClass="inline-exclude";this.links=[];this.sounds=[];this.soundsByURL=[];this.indexByURL=[];this.lastSound=null;this.soundCount=0;this.config={playNext:!1,autoPlay:!1};this.css={sDefault:"sm2_link",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"};this.addEventHandler="undefined"!=typeof window.addEventListener?function(a,b,e){return a.addEventListener(b,
e,!1)}:function(a,b,e){a.attachEvent("on"+b,e)};this.removeEventHandler="undefined"!=typeof window.removeEventListener?function(a,b,e){return a.removeEventListener(b,e,!1)}:function(a,b,e){return a.detachEvent("on"+b,e)};this.classContains=function(a,b){return"undefined"!=typeof a.className?a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1};this.addClass=function(a,d){return a&&d&&!b.classContains(a,d)?void(a.className=(a.className?a.className+" ":"")+d):!1};this.removeClass=function(a,d){return a&&
d&&b.classContains(a,d)?void(a.className=a.className.replace(new RegExp("( "+d+")|("+d+")","g"),"")):!1};this.getSoundByURL=function(a){return"undefined"!=typeof b.soundsByURL[a]?b.soundsByURL[a]:null};this.isChildOfNode=function(a,b){if(!a||!a.parentNode)return!1;b=b.toLowerCase();do a=a.parentNode;while(a&&a.parentNode&&a.nodeName.toLowerCase()!=b);return a.nodeName.toLowerCase()==b?a:null};this.events={play:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=c.css.sPlaying;
c.addClass(this._data.oLink,this._data.className)},stop:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=""},pause:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=c.css.sPaused;c.addClass(this._data.oLink,this._data.className)},resume:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=c.css.sPlaying;c.addClass(this._data.oLink,this._data.className)},finish:function(){if(c.removeClass(this._data.oLink,
this._data.className),this._data.className="",c.config.playNext){var a=c.indexByURL[this._data.oLink.href]+1;a<c.links.length&&c.handleClick({target:c.links[a]})}}};this.stopEvent=function(a){return"undefined"!=typeof a&&"undefined"!=typeof a.preventDefault?a.preventDefault():"undefined"!=typeof event&&"undefined"!=typeof event.returnValue&&(event.returnValue=!1),!1};this.getTheDamnLink=g?function(a){return a&&a.target?a.target:window.event.srcElement}:function(a){return a.target};this.handleClick=
function(a){if("undefined"!=typeof a.button&&1<a.button)return!0;var d=b.getTheDamnLink(a);if("a"!=d.nodeName.toLowerCase()&&(d=b.isChildOfNode(d,"a"),!d))return!0;d.getAttribute("href");if(!d.href||!f.canPlayLink(d)&&!b.classContains(d,b.playableClass)||b.classContains(d,b.excludeClass))return!0;var e=d.href,c=b.getSoundByURL(e);return c?c==b.lastSound?c.togglePause():(f._writeDebug("sound different than last sound: "+b.lastSound.id),b.lastSound&&b.stopSound(b.lastSound),c.togglePause()):(b.lastSound&&
b.stopSound(b.lastSound),c=f.createSound({id:"inlineMP3Sound"+b.soundCount++,url:e,onplay:b.events.play,onstop:b.events.stop,onpause:b.events.pause,onresume:b.events.resume,onfinish:b.events.finish,type:d.type||null}),c._data={oLink:d,className:b.css.sPlaying},b.soundsByURL[e]=c,b.sounds.push(c),c.play()),b.lastSound=c,"undefined"!=typeof a&&"undefined"!=typeof a.preventDefault?a.preventDefault():event.returnValue=!1,!1};this.stopSound=function(a){soundManager.stop(a.id);soundManager.unload(a.id)};
this.init=function(){f._writeDebug("inlinePlayer.init()");for(var a=document.getElementsByTagName("a"),c=0,e=0,g=a.length;g>e;e++)!f.canPlayLink(a[e])&&!b.classContains(a[e],b.playableClass)||b.classContains(a[e],b.excludeClass)||(b.addClass(a[e],b.css.sDefault),b.links[c]=a[e],b.indexByURL[a[e].href]=c,c++);0<c&&(b.addEventHandler(document,"click",b.handleClick),b.config.autoPlay&&b.handleClick({target:b.links[0],preventDefault:function(){}}));f._writeDebug("inlinePlayer.init(): Found "+c+" relevant items.")};
this.init()}var inlinePlayer=null;soundManager.onready(function(){inlinePlayer=new InlinePlayer});