!function(k){var z,B,e,A=[];A.on={};B={stopOtherSounds:!0,excludeClass:"sm2-exclude"};soundManager.setup({html5PollingInterval:50,flashVersion:9});soundManager.onready(function(){var c,a,l;if(c=e.dom.getAll(".sm2-bar-ui"),c&&c.length)for(a=0,l=c.length;l>a;a++)A.push(new z(c[a]))});z=function(c){function a(){B.stopOtherSounds&&soundManager.stopAll()}function l(b){b&&(v.on&&v.on[b]?v.on[b](v):A.on[b]&&A.on[b](v))}function m(b,f){var d=Math.floor(b/1E3),a=Math.floor(d/3600),c=Math.floor(d/60)-Math.floor(60*
a),d=Math.floor(d-3600*a-60*c);return f?(a?a+":":"")+(a&&10>c?"0"+c:c)+":"+(10>d?"0"+d:d):{min:c,sec:d}}function g(b){var a=b.getElementsByTagName("a");a.length&&(b=a[0]);f.playlistTarget.innerHTML='\x3cul class\x3d"sm2-playlist-bd"\x3e\x3cli\x3e'+b.innerHTML.replace(w.loadFailedCharacter,"")+"\x3c/li\x3e\x3c/ul\x3e";f.playlistTarget.getElementsByTagName("li")[0].scrollWidth>f.playlistTarget.offsetWidth&&(f.playlistTarget.innerHTML='\x3cul class\x3d"sm2-playlist-bd"\x3e\x3cli\x3e\x3cmarquee\x3e'+
b.innerHTML+"\x3c/marquee\x3e\x3c/li\x3e\x3c/ul\x3e")}function x(b){return soundManager.createSound({url:b,volume:D,whileplaying:function(){var b,d;b=Math.min(100,Math.max(0,this.position/this.durationEstimate*100))+"%";d=Math.min(100,Math.max(0,100*this.position/this.durationEstimate))+"%";this.duration&&(f.progress.style.left=b,f.progressBar.style.width=d,f.time.innerHTML=m(this.position,!0))},onbufferchange:function(b){b?e.css.add(f.o,"buffering"):e.css.remove(f.o,"buffering")},onplay:function(){e.css.swap(f.o,
"paused","playing");l("play")},onpause:function(){e.css.swap(f.o,"playing","paused");l("pause")},onresume:function(){e.css.swap(f.o,"paused","playing")},whileloading:function(){this.isHTML5||(f.duration.innerHTML=m(this.durationEstimate,!0))},onload:function(b){b?f.duration.innerHTML=m(this.duration,!0):this._iO&&this._iO.onerror&&this._iO.onerror()},onerror:function(){var b,d;h.getItem()&&w.loadFailedCharacter&&(f.playlistTarget.innerHTML=f.playlistTarget.innerHTML.replace("\x3cli\x3e","\x3cli\x3e"+
w.loadFailedCharacter+" "),h.data.playlist&&h.data.playlist[h.data.selectedIndex]&&(b=h.data.playlist[h.data.selectedIndex].getElementsByTagName("a")[0],d=b.innerHTML,-1===d.indexOf(w.loadFailedCharacter)&&(b.innerHTML=w.loadFailedCharacter+" "+d)));l("error");navigator.userAgent.match(/mobile/i)?q.next():(h.data.timer&&k.clearTimeout(h.data.timer),h.data.timer=k.setTimeout(q.next,2E3))},onstop:function(){e.css.remove(f.o,"playing")},onfinish:function(){var b,d;e.css.remove(f.o,"playing");f.progress.style.left=
"0%";b=h.data.selectedIndex;l("finish");(d=h.getNext())&&h.data.selectedIndex!==b?(h.select(d),g(d),a(),this.play({url:h.getURL()})):l("end")}})}function t(b){soundManager.canPlayURL(b.href)&&(h.data.timer&&(k.clearTimeout(h.data.timer),h.data.timer=null),p||(p=x(b.href)),p.stop(),h.select(b.parentNode),g(b.parentNode),f.progress.style.left="0px",f.progressBar.style.width="0px",a(),p.play({url:b.href,position:0}))}function u(){function b(b){var a;return null===d.selectedIndex?b:(a=d.playlist,b=void 0!==
b?b:d.selectedIndex,b=Math.max(0,Math.min(b,a.length)),a[b])}function a(){return f.playlist?void(d.playlist=f.playlist.getElementsByTagName("li")):(k.console&&console.warn&&console.warn("refreshDOM(): playlist node not found?"),!1)}var d;return d={playlist:[],selectedIndex:0,loopMode:!1,timer:null},function(){D=soundManager.defaultOptions.volume;f.playlistTarget=e.dom.get(f.o,".sm2-playlist-target");f.playlistContainer=e.dom.get(f.o,".sm2-playlist-drawer");f.playlist=e.dom.get(f.o,".sm2-playlist-bd");
a();e.css.has(f.o,r.playlistOpen)&&k.setTimeout(function(){q.menu(!0)},1)}(),{data:d,refresh:a,getNext:function(){return null!==d.selectedIndex&&d.selectedIndex++,1<d.playlist.length?d.selectedIndex>=d.playlist.length&&(d.loopMode?d.selectedIndex=0:d.selectedIndex--):d.selectedIndex=null,b()},getPrevious:function(){return d.selectedIndex--,0>d.selectedIndex&&(d.loopMode?d.selectedIndex=d.playlist.length-1:d.selectedIndex++),b()},getItem:b,getURL:function(){var d,a;return d=b(),d&&(a=d.getElementsByTagName("a")[0].href),
a},playItemByOffset:function(d){(d=b(d||0))&&t(d.getElementsByTagName("a")[0])},select:function(b){var a,c,m,l,g,h,C,k;h=e.dom.getAll(f.playlist,"."+r.selected);C=0;for(k=h.length;k>C;C++)e.css.remove(h[C],r.selected);b&&(g=e.dom.ancestor("li",b),e.css.add(g,r.selected),a=b.offsetTop,c=a+b.offsetHeight,m=f.playlistContainer.offsetHeight,l=f.playlist.scrollTop,c>m+l?f.playlist.scrollTop=c-m+8:l>a&&(f.playlist.scrollTop=b.offsetTop-8));if(l=-1,a=d.playlist)for(c=0,m=a.length;m>c;c++)if(a[c]===b){l=
c;break}d.selectedIndex=l}}}function y(b){return b&&(b.which&&2===b.which||void 0===b.which&&1!==b.button)?!0:void 0}function G(b){return b?(n.volume.x=e.position.getOffX(b),n.volume.y=e.position.getOffY(b),n.volume.width=b.offsetWidth,n.volume.height=b.offsetHeight,n.volume.backgroundSize=parseInt(e.style.get(b,"background-size"),10),void(k.navigator.userAgent.match(/msie|trident/i)&&(n.volume.backgroundSize=n.volume.backgroundSize/n.volume.width*100))):!1}function z(b){var a,d;return d=b.target||
b.srcElement,y(b)?!0:("a"!==d.nodeName.toLowerCase()&&(a=d.getElementsByTagName("a"),a&&a.length&&(d=d.getElementsByTagName("a")[0])),e.css.has(d,"sm2-volume-control")?(G(d),e.events.add(document,"mousemove",q.adjustVolume),e.events.add(document,"mouseup",q.releaseVolume),q.adjustVolume(b)):void 0)}function J(b){var a,d,f,c,m,l,g;if(a=b||k.event,d=a.target||a.srcElement,d&&d.nodeName){if(c=d.nodeName.toLowerCase(),"a"!==c&&d.parentNode){do d=d.parentNode,c=d.nodeName.toLowerCase();while("a"!==c&&
d.parentNode);if(!d)return!1}if("a"===c&&(l=d.href,soundManager.canPlayURL(l)?e.css.has(d,B.excludeClass)||(t(d),g=!0):(f=d.href.lastIndexOf("#"),-1!==f&&(m=d.href.substr(f+1),m&&q[m]&&(g=!0,q[m](b)))),g))return e.events.preventDefault(a)}}function F(b){var a,d,c,m,l,g;return a=f.progressTrack,d=e.position.getOffX(a),c=a.offsetWidth,m=b.clientX-d,l=m/c,g=p,g&&g.duration&&(g.setPosition(g.duration*l),g._iO&&g._iO.whileplaying&&g._iO.whileplaying.apply(g)),b.preventDefault&&b.preventDefault(),!1}function H(b){return e.events.remove(document,
"mousemove",F),e.css.remove(f.o,"grabbing"),e.events.remove(document,"mouseup",H),e.events.preventDefault(b),!1}var r,f,w,h,p,q,n,E,D,I,v;return r={disabled:"disabled",selected:"selected",active:"active",legacy:"legacy",noVolume:"no-volume",playlistOpen:"playlist-open"},f={o:null,playlist:null,playlistTarget:null,playlistContainer:null,time:null,player:null,progress:null,progressTrack:null,progressBar:null,duration:null,volume:null},w={loadFailedCharacter:'\x3cspan title\x3d"Failed to load/play." class\x3d"load-error"\x3e✖\x3c/span\x3e'},
n={volume:{x:0,y:0,width:0,height:0,backgroundSize:0}},q={play:function(b){var c,d;return void 0===b||isNaN(b)?(b&&b.target&&(c=b.target||b.srcElement,d=c.href),d&&-1===d.indexOf("#")||(d=f.playlist.getElementsByTagName("a")[0].href),p||(p=x(d)),p.playState||a(),p.togglePause(),void(p.paused&&h.data.timer&&(k.clearTimeout(h.data.timer),h.data.timer=null))):h.playItemByOffset(b)},pause:function(){p&&p.readyState&&p.pause()},resume:function(){p&&p.readyState&&p.resume()},stop:function(){return q.pause()},
next:function(){var b,a;h.data.timer&&(k.clearTimeout(h.data.timer),h.data.timer=null);a=h.data.selectedIndex;(b=h.getNext(!0))&&h.data.selectedIndex!==a&&t(b.getElementsByTagName("a")[0])},prev:function(){var b,a;a=h.data.selectedIndex;(b=h.getPrevious())&&h.data.selectedIndex!==a&&t(b.getElementsByTagName("a")[0])},shuffle:function(b){(b=b?b.target||b.srcElement:e.dom.get(f.o,".shuffle"))&&!e.css.has(b,r.disabled)&&(e.css.toggle(b.parentNode,r.active),h.data.shuffleMode=!h.data.shuffleMode)},repeat:function(b){(b=
b?b.target||b.srcElement:e.dom.get(f.o,".repeat"))&&!e.css.has(b,r.disabled)&&(e.css.toggle(b.parentNode,r.active),h.data.loopMode=!h.data.loopMode)},menu:function(b){var a;a=e.css.has(f.o,r.playlistOpen);!h||h.data.selectedIndex||I||(f.playlist.scrollTop=0,I=!0);"boolean"==typeof b&&b||(a||(f.playlistContainer.style.height="0px"),a=e.css.toggle(f.o,r.playlistOpen));f.playlistContainer.style.height=(a?f.playlistContainer.scrollHeight:0)+"px"},adjustVolume:function(b){var a,d,c,m,g;return c=f.volume,
void 0===b?!1:b&&void 0!==b.clientX?(a=(100-n.volume.backgroundSize)/2,m=Math.max(0,Math.min(1,(b.clientX-n.volume.x)/n.volume.width)),c.style.clip="rect(0px, "+n.volume.width*m+"px, "+n.volume.height+"px, "+a/100*n.volume.width+"px)",d=a/100*n.volume.width,g=100*Math.max(0,Math.min(1,(b.clientX-n.volume.x-d)/(n.volume.width-2*d))),p&&p.setVolume(g),D=g,e.events.preventDefault(b)):(arguments.length&&k.console&&k.console.warn&&console.warn("Bar UI: call setVolume("+b+") instead of adjustVolume("+b+
")."),q.setVolume.apply(this,arguments))},releaseVolume:function(){e.events.remove(document,"mousemove",q.adjustVolume);e.events.remove(document,"mouseup",q.releaseVolume)},setVolume:function(b){var a,d,c,m,g;void 0===b||isNaN(b)||(f.volume&&(m=f.volume,a=n.volume.backgroundSize,d=(100-a)/2,c=d/100*n.volume.width,g=c+b/100*(n.volume.width-2*c),m.style.clip="rect(0px, "+g+"px, "+n.volume.height+"px, "+c+"px)"),p&&p.setVolume(b),D=b)}},function(){c||console.warn("init(): No playerNode element?");f.o=
c;k.navigator.userAgent.match(/msie [678]/i)&&e.css.add(f.o,r.legacy);k.navigator.userAgent.match(/mobile/i)&&e.css.add(f.o,r.noVolume);f.progress=e.dom.get(f.o,".sm2-progress-ball");f.progressTrack=e.dom.get(f.o,".sm2-progress-track");f.progressBar=e.dom.get(f.o,".sm2-progress-bar");f.volume=e.dom.get(f.o,"a.sm2-volume-control");f.volume&&G(f.volume);f.duration=e.dom.get(f.o,".sm2-inline-duration");f.time=e.dom.get(f.o,".sm2-inline-time");h=new u;E=h.getItem(0);h.select(E);E&&g(E);e.events.add(f.o,
"mousedown",z);e.events.add(f.o,"click",J);e.events.add(f.progressTrack,"mousedown",function(b){return y(b)?!0:(e.css.add(f.o,"grabbing"),e.events.add(document,"mousemove",F),e.events.add(document,"mouseup",H),F(b))})}(),v={on:null,actions:q,dom:f,playlistController:h}};e={array:function(){return{compare:function(c){return function(a,l){return a[c]<l[c]?-1:a[c]>l[c]?1:0}},shuffle:function(c){var a,l,m;for(a=c.length-1;0<a;a--)l=Math.floor(Math.random()*(a+1)),m=c[a],c[a]=c[l],c[l]=m;return c}}}(),
css:function(){function c(a,c){return void 0!==a.className?(new RegExp("(^|\\s)"+c+"(\\s|$)")).test(a.className):!1}function a(a,g){return a&&g&&!c(a,g)?void(a.className=(a.className?a.className+" ":"")+g):!1}function l(a,g){return a&&g&&c(a,g)?void(a.className=a.className.replace(new RegExp("( "+g+")|("+g+")","g"),"")):!1}return{has:c,add:a,remove:l,swap:function(c,g,e){var k={className:c.className};l(k,g);a(k,e);c.className=k.className},toggle:function(e,g){var k,t;return k=c(e,g),t=k?l:a,t(e,g),
!k}}}(),dom:function(){function c(a,c){var e,g,k;return 1===arguments.length?(e=document.documentElement,g=a):(e=a,g=c),e&&e.querySelectorAll&&(k=e.querySelectorAll(g)),k}return{ancestor:function(a,c,e){if(!c||!a||(a=a.toUpperCase(),e&&c&&c.nodeName===a))return c;for(;c&&c.nodeName!==a&&c.parentNode;)c=c.parentNode;return c&&c.nodeName===a?c:null},get:function(){var a=c.apply(this,arguments);return a&&a.length?a[a.length-1]:a&&0===a.length?null:a},getAll:c}}(),position:function(){return{getOffX:function(c){var a=
0;if(c.offsetParent)for(;c.offsetParent;)a+=c.offsetLeft,c=c.offsetParent;else c.x&&(a+=c.x);return a},getOffY:function(c){var a=0;if(c.offsetParent)for(;c.offsetParent;)a+=c.offsetTop,c=c.offsetParent;else c.y&&(a+=c.y);return a}}}(),style:function(){return{get:function(c,a){var e;return c.currentStyle?e=c.currentStyle[a]:k.getComputedStyle&&(e=document.defaultView.getComputedStyle(c,null).getPropertyValue(a)),e}}}(),events:function(){var c,a,e;return c=function(c,e,l){return k.addEventListener?
c.addEventListener(e,l,!1):c.attachEvent("on"+e,l),{detach:function(){return a(c,e,l)}}},a=void 0!==k.removeEventListener?function(a,c,e){return a.removeEventListener(c,e,!1)}:function(a,c,e){return a.detachEvent("on"+c,e)},e=function(a){return a.preventDefault?a.preventDefault():(a.returnValue=!1,a.cancelBubble=!0),!1},{add:c,preventDefault:e,remove:a}}(),features:function(){function c(a){return void 0!==u.style[a]?a:null}function a(a){try{u.style[y]=a}catch(c){return!1}return!!u.style[y]}var e,
m,g,x,t,u,y;return u=document.createElement("div"),m=k.requestAnimationFrame||k.webkitRequestAnimationFrame||k.mozRequestAnimationFrame||k.oRequestAnimationFrame||k.msRequestAnimationFrame||null,e=m?function(){return m.apply(k,arguments)}:null,g={transform:{ie:c("-ms-transform"),moz:c("MozTransform"),opera:c("OTransform"),webkit:c("webkitTransform"),w3:c("transform"),prop:null},rotate:{has3D:!1,prop:null},getAnimationFrame:e},g.transform.prop=g.transform.w3||g.transform.moz||g.transform.webkit||g.transform.ie||
g.transform.opera,g.transform.prop&&(y=g.transform.prop,t={css_2d:"rotate(0deg)",css_3d:"rotate3d(0,0,0,0deg)"},a(t.css_3d)?(g.rotate.has3D=!0,x="rotate3d"):a(t.css_2d)&&(x="rotate"),g.rotate.prop=x),u=null,g}()};k.sm2BarPlayers=A;k.sm2BarPlayerOptions=B;k.SM2BarPlayer=z}(window);