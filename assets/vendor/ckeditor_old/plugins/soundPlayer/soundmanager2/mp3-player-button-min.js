function BasicMP3Player(){var b=this,d=this,g=soundManager,h=navigator.userAgent.match(/ipad|iphone/i),k=navigator.userAgent.match(/msie/i);this.excludeClass="button-exclude";this.links=[];this.sounds=[];this.soundsByURL={};this.indexByURL={};this.lastSound=null;this.soundCount=0;this.config={playNext:!1,autoPlay:!1};this.css={sDefault:"sm2_button",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"};this.includeClass=this.css.sDefault;this.addEventHandler="undefined"!=typeof window.addEventListener?
function(a,b,c){return a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)};this.removeEventHandler="undefined"!=typeof window.removeEventListener?function(a,b,c){return a.removeEventListener(b,c,!1)}:function(a,b,c){return a.detachEvent("on"+b,c)};this.classContains=function(a,b){return"undefined"!=typeof a.className?a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1};this.addClass=function(a,f){return a&&f&&!b.classContains(a,f)?void(a.className=(a.className?a.className+" ":
"")+f):!1};this.removeClass=function(a,f){return a&&f&&b.classContains(a,f)?void(a.className=a.className.replace(new RegExp("( "+f+")|("+f+")","g"),"")):!1};this.getSoundByURL=function(a){return"undefined"!=typeof b.soundsByURL[a]?b.soundsByURL[a]:null};this.isChildOfNode=function(a,b){if(!a||!a.parentNode)return!1;b=b.toLowerCase();do a=a.parentNode;while(a&&a.parentNode&&a.nodeName.toLowerCase()!==b);return a.nodeName.toLowerCase()===b?a:null};this.events={play:function(){d.removeClass(this._data.oLink,
this._data.className);this._data.className=d.css.sPlaying;d.addClass(this._data.oLink,this._data.className)},stop:function(){d.removeClass(this._data.oLink,this._data.className);this._data.className=""},pause:function(){d.removeClass(this._data.oLink,this._data.className);this._data.className=d.css.sPaused;d.addClass(this._data.oLink,this._data.className)},resume:function(){d.removeClass(this._data.oLink,this._data.className);this._data.className=d.css.sPlaying;d.addClass(this._data.oLink,this._data.className)},
finish:function(){if(d.removeClass(this._data.oLink,this._data.className),this._data.className="",d.config.playNext){var a=d.indexByURL[this._data.oLink.href]+1;a<d.links.length&&d.handleClick({target:d.links[a]})}}};this.stopEvent=function(a){return"undefined"!=typeof a&&"undefined"!=typeof a.preventDefault?a.preventDefault():"undefined"!=typeof window.event&&(window.event.returnValue=!1),!1};this.getTheDamnLink=k?function(a){return a&&a.target?a.target:window.event.srcElement}:function(a){return a.target};
this.handleClick=function(a){if("undefined"!=typeof a.button&&1<a.button)return!0;var d,c,e=b.getTheDamnLink(a);return"a"===e.nodeName.toLowerCase()||(e=b.isChildOfNode(e,"a"))?(e.getAttribute("href"),e.href&&soundManager.canPlayLink(e)&&!b.classContains(e,b.excludeClass)&&b.classContains(e,b.includeClass)?(g._writeDebug("handleClick()"),d=e.href,c=b.getSoundByURL(d),c?c===b.lastSound?c.togglePause():(c.togglePause(),g._writeDebug("sound different than last sound: "+b.lastSound.id),b.lastSound&&b.stopSound(b.lastSound)):
(c=g.createSound({id:"basicMP3Sound"+b.soundCount++,url:d,onplay:b.events.play,onstop:b.events.stop,onpause:b.events.pause,onresume:b.events.resume,onfinish:b.events.finish,type:e.type||null}),c._data={oLink:e,className:b.css.sPlaying},b.soundsByURL[d]=c,b.sounds.push(c),b.lastSound&&b.stopSound(b.lastSound),c.play()),b.lastSound=c,b.stopEvent(a)):!0):!0};this.stopSound=function(a){soundManager.stop(a.id);h||soundManager.unload(a.id)};this.init=function(){g._writeDebug("basicMP3Player.init()");var a,
d,c=0,e=document.getElementsByTagName("a");a=0;for(d=e.length;d>a;a++)b.classContains(e[a],b.css.sDefault)&&!b.classContains(e[a],b.excludeClass)&&(b.links[c]=e[a],b.indexByURL[e[a].href]=c,c++);0<c&&(b.addEventHandler(document,"click",b.handleClick),b.config.autoPlay&&b.handleClick({target:b.links[0],preventDefault:function(){}}));g._writeDebug("basicMP3Player.init(): Found "+c+" relevant items.")};this.init()}var basicMP3Player=null;
soundManager.setup({preferFlash:!1,onready:function(){basicMP3Player=new BasicMP3Player}});